(this["webpackJsonpdearlog-webapp"]=this["webpackJsonpdearlog-webapp"]||[]).push([[0],{137:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},231:function(e,t){},233:function(e,t){},250:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(40),s=n.n(r),i=(n(137),n(5)),o=n(16),u=n(14),l=n(20),d=(n(138),n(139),n(140),n(1));var b=n(13),h=n(17),p=n(18),j=n(19),f=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("header",{children:[Object(d.jsx)(o.b,{to:"/",className:"logo",children:"DEARLOG"}),Object(d.jsx)(o.b,{to:"/namespace",className:"button",children:"Namespace"}),Object(d.jsx)(o.b,{to:"/tag",className:"button",children:"Tag"})]})}}]),n}(c.a.Component),m=(c.a.Component,n(9)),O=n(7),v=n.n(O),g=n(12),x=n(6),y=n(15),k=(n(68),n(263)),S=n(264);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var A=Object(a.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,r=e.size,s=void 0===r?24:r,i="false"==e.fill?"none":n,o=C(e,["color","size","fill"]);return c.a.createElement("svg",N({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:i,stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),c.a.createElement("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}));A.displayName="Heart";var D=A,w=n(21),_=n.n(w),T="https://dearlog-api.herokuapp.com",L=function(){function e(){Object(b.a)(this,e),this.getSocketAudioUrl=function(){return"".concat(T,"/audio")},this.getAudioStreamingUrl=function(e){return"".concat(T,"/audio/").concat(e)},this.getNextPrevLog=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs/nextprev/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLog=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLogs=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.deleteLog=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),_.a.delete("".concat(T,"/api/logs/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getNamespaces=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/namespaces"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getNamespace=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/namespaces/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addNamespace=function(e,t){_.a.post("".concat(T,"/api/namespaces"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteNamespace=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),_.a.delete("".concat(T,"/api/namespaces/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getTags=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/tags"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getTag=function(){var e=Object(g.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/tags/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTag=function(e,t){_.a.post("".concat(T,"/api/tags"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteTag=function(e,t){console.log(e),_.a.delete("".concat(T,"/api/tags/").concat(e)).then(t).catch((function(e){return console.log(e)}))}}return Object(h.a)(e,[{key:"addLog",value:function(e,t){_.a.post("".concat(T,"/api/logs"),e).then(t).catch((function(e){return console.log(e)}))}},{key:"updateLog",value:function(e,t){_.a.put("".concat(T,"/api/logs/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateNamespace",value:function(e,t){_.a.put("".concat(T,"/api/namespaces/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateTag",value:function(e,t){_.a.put("".concat(T,"/api/tags/").concat(e),t).then((function(e){console.log(e.data)}))}}]),e}(),I=new Intl.DateTimeFormat("fr",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}),R=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"date",value:function(e){return I.format(new Date(e))}},{key:"string",value:function(e){return e||""}}]),e}(),E=(n(55),n(80)),U=n.n(E),M=n(129),F=n(130),P=(n(187),function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={value:a.props.content,selectedTab:"write"},a.handleContentChange=a.handleContentChange.bind(Object(y.a)(a)),a.handleTab=a.handleTab.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleContentChange",value:function(e){this.setState({value:e}),this.props.onChangeContent(e)}},{key:"handleTab",value:function(e){this.setState({selectedTab:e})}},{key:"render",value:function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"container",style:{width:"99%",padding:"10px"},children:Object(d.jsx)(U.a,{value:this.state.value,onChange:this.handleContentChange,selectedTab:this.state.selectedTab,onTabChange:this.handleTab,generateMarkdownPreview:function(e){return Promise.resolve(Object(d.jsx)(M.a,{children:e,remarkPlugins:[F.a]}))},childProps:{writeButton:{tabIndex:-1}},minEditorHeight:200,minPreviewHeight:200})})})}}]),n}(c.a.Component)),B=n(10);n(190);var z=function(e){var t=e.minutes,n=e.seconds;return Object(d.jsxs)("div",{className:"audiotime",children:[void 0!==t?"".concat(t<=9?"0"+t:t):"00",":",void 0!==n?"".concat(n<=9?"0"+n:n):"00"]})},G=(n(191),n(259)),H=n(260),q=n(261),V=n(262);var W=function(e){var t,n,c=Object(a.useState)(!1),r=Object(B.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(0),u=Object(B.a)(o,2),l=u[0],b=u[1],h=Object(a.useState)(0),p=Object(B.a)(h,2),j=p[0],f=p[1],m=Object(a.useRef)(),O=Object(a.useRef)(),v=Object(a.useRef)();Object(a.useEffect)((function(){var t=e.duration;b(t),O.current.max=t}),[null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.loadedmetadata,null===m||void 0===m||null===(n=m.current)||void 0===n?void 0:n.readyState]);var g=function(e){var t=Math.floor(e/60),n=t<10?"0".concat(t):"".concat(t),a=Math.floor(e%60),c=a<10?"0".concat(a):"".concat(a);return"".concat(n,":").concat(c)},x=function e(){null!==m.current&&(O.current.value=m.current.currentTime,k(),v.current=requestAnimationFrame(e),m.current.currentTime>l&&i(!1))},y=function(){m.current.currentTime=O.current.value,k()},k=function(){f(O.current.value)};return Object(d.jsxs)("div",{className:"container_player",children:[Object(d.jsxs)("audio",{ref:m,preload:"metadata",children:[Object(d.jsx)("source",{src:e.audios[0]?e.audios[0]:e.url,type:"audio/ogg"}),Object(d.jsx)("source",{src:e.audios[0]?e.audios[0]:e.url,type:"audio/mpeg"})]}),Object(d.jsx)("div",{children:"TITLE"}),Object(d.jsxs)("div",{className:"container_duration_current_progress",children:[Object(d.jsx)("div",{children:g(j)}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"range",defaultValue:"0",ref:O,onChange:y})}),console.log("duration",l),Object(d.jsx)("div",{children:isNaN(l)?"__:__":g(l)})]}),Object(d.jsxs)("div",{className:"container_duration_current_progress",children:[Object(d.jsx)("button",{onClick:function(){O.current.value=Number(O.current.value-30),y()},children:Object(d.jsx)(G.a,{})}),Object(d.jsxs)("button",{onClick:function(){var e=s;i(!e),e?(m.current.pause(),cancelAnimationFrame(v.current)):(m.current.play(),v.current=requestAnimationFrame(x))},children:[" ",s?Object(d.jsx)(H.a,{}):Object(d.jsx)(q.a,{})]}),Object(d.jsx)("button",{onClick:function(){O.current.value=Number(O.current.value+30),y()},children:Object(d.jsx)(V.a,{})})]})]})};var J=function(e){var t=Object(a.useState)({h:0,m:0,s:0}),n=Object(B.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(0),i=Object(B.a)(s,2),o=i[0],u=i[1],l=Object(a.useState)(!1),b=Object(B.a)(l,2),h=b[0],p=b[1],j=Object(a.useState)(!1),f=Object(B.a)(j,2),m=(f[0],f[1]),O=Object(a.useState)([]),x=Object(B.a)(O,2),y=x[0],k=x[1],S=Object(a.useState)(null),N=Object(B.a)(S,2),C=(N[0],N[1]),A=Object(a.useState)(!1),D=Object(B.a)(A,2),w=(D[0],D[1]),_=Object(a.useRef)(null),T=Object(a.useRef)(null),L=Object(a.useRef)(null),I="audio/*",R=Object(a.useState)(e.isAudioRecorded),E=Object(B.a)(R,2),U=E[0],M=E[1];function F(){_.current=setInterval(P,1e3)}function P(){u((function(e){return e+1}))}function G(t){clearInterval(_.current),r({h:0,m:0,s:0}),t.preventDefault(),T.current.stop(),p(!1),w(!1),function(){var t=new Blob(L.current,{type:I}),n=window.URL.createObjectURL(t);k([n]),C(t),e.handleAudioStop({url:n,blob:t,chunks:L.current,duration:c}),M(!0)}()}return Object(a.useEffect)((function(){r((function(e){return function(e){var t=Math.floor(e/3600),n=e%3600,a=Math.floor(n/60),c=n%60,r=Math.ceil(c);return{h:t,m:a,s:r}}(o)}))}),[o]),Object(a.useEffect)((function(){!function(){var t=Object(g.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("anyNameFunction"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!navigator.mediaDevices){t.next=11;break}return t.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:n=t.sent,e.mimeTypeToUseWhenRecording?T.current=new MediaRecorder(n,{mimeType:e.mimeTypeToUseWhenRecording}):T.current=new MediaRecorder(n),L.current=[],T.current.ondataavailable=function(e){e.data&&e.data.size>0&&L.current.push(e.data)},t.next=13;break;case 11:m(!0),console.log("Media Decives will work only with SSL.....");case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(d.jsx)(d.Fragment,{children:U?Object(d.jsx)(W,{url:e.audioURL,duration:e.duration?e.duration:o,audios:y}):Object(d.jsxs)("div",{className:"_audiorecorder",children:[Object(d.jsx)("div",{className:"audiotitle",children:e.title}),h?Object(d.jsx)("span",{className:"audiotitle clignote",children:"Recording..."}):null,Object(d.jsx)(z,{minutes:c.m,seconds:c.s}),h?Object(d.jsx)("button",{onClick:G,children:"stop"}):Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),L.current=[],T.current.start(10),F(),p(!0)},children:"record"}),Object(d.jsx)("button",{onClick:function(t){h&&G(t),r((function(e){return{h:0,m:0,s:0}})),u(0),p(!1),m(!1),k([]),C(null),e.handleReset()},children:"reset"})]})})};var K=function(e){var t=Object(a.useState)({url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}}),n=Object(B.a)(t,2),c=n[0],r=n[1];return Object(d.jsx)(J,{title:"New recording",audioURL:e.url?e.url:c.url,handleAudioStop:function(t){return function(t){console.log(t),r(t),e.onAudioData(t)}(t)},handleAudioUpload:function(e){return t=e,void console.log(t);var t},handleReset:function(){return function(){console.log("handleReset");var t={url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}};r(t),e.onAudioData(t)}()},mimeTypeToUseWhenRecording:"audio/webm",duration:e.duration,isAudioRecorded:e.isAudioRecorded})},Q=(c.a.Component,n(85)),X=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).store=new L,n.format=new R,n.logInit={id:null,heart:!1,title:"",description:"",createdAt:"",updatedAt:"",namespace:null,tag:"",type:"",content:"",namespacesAvaible:[],tags:[],tagsAvaible:[]},n.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},n.state=Object(i.a)(Object(i.a)({},n.logInit),n.appStateInit),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(y.a)(n)),n.handleAudioData=n.handleAudioData.bind(Object(y.a)(n)),n.handleNameSpaceSelect=n.handleNameSpaceSelect.bind(Object(y.a)(n)),n.handleNameSpaceCreate=n.handleNameSpaceCreate.bind(Object(y.a)(n)),n.handleTagSelect=n.handleTagSelect.bind(Object(y.a)(n)),n.handleTagCreate=n.handleTagCreate.bind(Object(y.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s,i,o,u,l,d=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.title){e.next=4;break}return this.props.notify_error("Title is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=14;break}return n=this.state,a=n.id,c=n.title,r=n.description,s=n.heart,i=n.namespace,o=n.tags,u=n.content,e.next=8,this.store.updateLog(a,{title:c,description:r,heart:s,namespace:i,tags:o,content:u});case 8:e.sent,"audio"==this.state.type&&this.saveAudio(a,this.state.createdAt),this.props.notify_success("log updated"),console.log(this.props),e.next=17;break;case 14:l=function(e){"audio"==d.state.type&&d.saveAudio(e.id,e.createdAt).then((function(){return console.log("saveAudio")}))},this.store.addLog({title:this.state.title,description:this.state.description,heart:this.state.heart,namespace:this.state.namespace,tags:this.state.tags,type:this.props.type,content:this.state.content},(function(e){console.log("res",e);var t=e.data;d.load(t.id),l(t)})),this.props.notify_success("log added");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAudio",value:function(){var e=Object(g.a)(v.a.mark((function e(t,a){var c,r,s,i,o,u,l,d,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.state.audioData){e.next=3;break}return e.abrupt("return");case 3:console.log("data",c),r=c.duration,s=function(e){return 3600*e.h+60*e.m+e.s},i=c.blob,o=n(198),u=n(226),l=o.connect(this.store.getSocketAudioUrl(),{transports:["websocket"]}),d=u.createStream(),b=n(248),u(l).emit("audiostream",d,{createdAt:a,id:t,duration:s(r)}),b(i).pipe(d);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleHeart",value:function(e){e.preventDefault(),this.setState({heart:!this.state.heart})}},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteLog(this.state.id),this.props.notify_success("log deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault();var t,n={title:(t=this.logInit).title,description:t.description,heart:t.heart,namespace:t.namespace,tag:t.tag,content:t.content};this.setState(n)}},{key:"load",value:function(e){var t=this;this.store.getLog(e).then((function(n){console.log("data",n);var a=n.id,c=n.title,r=n.description,s=n.createdAt,o=n.heart,u=n.updatedAt,l=n.namespace,d=n.tags,b=n.type,h=n.content,p=l?Object(i.a)(Object(i.a)({},{value:l.name,label:l.name}),l):[],j=t.addValueAndLabelToSelect(d);if(console.log(p),"audio"===b&&""!==h){console.log("content",h);var f=JSON.parse(h);console.log("contentAudio",f),t.setState({content:f})}else t.setState({content:h});t.setState({id:a,title:c,description:r,createdAt:s,heart:o,updatedAt:u,namespace:p,tags:j,type:b,mode:"EDIT"}),t.store.getNextPrevLog(e).then((function(e){t.setState(e)}))})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(u.e)(this.props.location.pathname,{path:"/log/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){var e=this.props.type;this.setState({mode:"ADD",type:e})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,n,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:return e.next=12,this.store.getNamespaces();case 12:return a=e.sent,console.log("dataNamespace",a),this.setState({namespacesAvaible:this.addValueAndLabelToSelect(a)}),e.next=17,this.store.getTags();case 17:c=e.sent,this.setState({tagsAvaible:this.addValueAndLabelToSelect(c)});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addValueAndLabelToSelect",value:function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{value:e.name,label:e.name})}))}},{key:"handleNameSpaceSelect",value:function(e){console.log("selected",e),this.setState({namespace:e})}},{key:"handleNameSpaceCreate",value:function(e){var t=this;this.store.addNamespace({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(m.a)(t.state.namespacesAvaible),[a])),t.setState({namespacesAvaible:[].concat(Object(m.a)(t.state.namespacesAvaible),[a]),namespace:a})}))}},{key:"handleTagSelect",value:function(e){this.setState({tags:e})}},{key:"handleTagCreate",value:function(e){var t=this;this.store.addTag({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(m.a)(t.state.tagsAvaible),[a])),t.setState({tagsAvaible:[].concat(Object(m.a)(t.state.tagsAvaible),[a]),tag:a})}))}},{key:"onPrevLog",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextLog",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextLog")}},{key:"handleAudioData",value:function(e){Object(i.a)({},e);console.log("data",e),this.setState({audioData:e}),console.log("handleAudioData")}},{key:"computeUrlAudio",value:function(){var e=this.state.id;return"audio"===this.state.type&&this.state.content.isRecorded?this.store.getAudioStreamingUrl(e):null}},{key:"renderSwitch",value:function(e){switch(e){case"text":return Object(d.jsx)(P,{content:this.state.content,onChangeContent:this.handleContentChange});case"audio":return Object(d.jsx)(K,{id:this.state.id,isAudioRecorded:this.state.content.isRecorded,duration:this.state.content.duration,url:this.computeUrlAudio(),onAudioData:this.handleAudioData});default:return"foo"}}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.heart,a=t.isRedirect,c=t.createdAt,r=t.updatedAt,s=t.mode,o=t.title,l=t.description,b=t.content,h=t.namespace,p=t.tag,j=t.type,f=t.namespacesAvaible;r=(c=c?this.format.date(c):"")?this.format.date(r):"",o=this.format.string(o),l=this.format.string(l),p=this.format.string(p),b=this.format.string(b);var m={control:function(e){return Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"white"})},option:function(e,t){t.data,t.isDisabled,t.isFocused,t.isSelected;return Object(i.a)(Object(i.a)({},e),{},{color:"#000",cursor:"default"})}};return a?Object(d.jsx)(u.a,{to:"/"}):Object(d.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(d.jsxs)("div",{className:"header_group",children:[Object(d.jsx)("h1",{className:"capital",children:j}),Object(d.jsx)("h3",{children:s})]}),Object(d.jsxs)("div",{className:"title_description_group",children:[Object(d.jsx)("div",{className:"item",children:Object(d.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Title*"}),o?"":Object(d.jsx)("h5",{children:"This field is required"}),Object(d.jsx)("input",{id:"title",name:"title",className:"title_input",placeholder:"Title",type:"text",onChange:function(t){return e.handleChange(t)},value:o})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Description"}),Object(d.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:l})]})]}),Object(d.jsxs)("div",{className:"metadata_group",children:[Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Created At"}),Object(d.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Updated At"}),Object(d.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:r})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Heart"}),Object(d.jsx)("button",{onClick:function(t){return e.toggleHeart(t)},children:Object(d.jsx)(D,{fill:n?"true":"false",color:"red"})})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Namespace"}),Object(d.jsx)(Q.a,{value:h,onChange:this.handleNameSpaceSelect,onCreateOption:this.handleNameSpaceCreate,options:f,isClearable:!0,styles:m})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Tag"}),Object(d.jsx)(Q.a,{value:this.state.tags,onChange:this.handleTagSelect,onCreateOption:this.handleTagCreate,options:this.state.tagsAvaible,isClearable:!0,isMulti:!0,styles:m})]})]}),Object(d.jsxs)("div",{className:"content_group",children:[this.state.prev?Object(d.jsx)("button",{className:"before_button",onClick:function(t){return e.onPrevLog(t)},children:Object(d.jsx)(k.a,{})}):"",this.renderSwitch(this.state.type),this.state.next?Object(d.jsx)("button",{className:"after_button",onClick:function(t){return e.onNextLog(t)},children:Object(d.jsx)(S.a,{})}):""]}),Object(d.jsxs)("div",{className:"button_group",children:[Object(d.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(d.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(d.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(d.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),a}(c.a.Component),Y=function(e){var t=e.text,n=e.callback;return Object(d.jsx)("button",{onClick:n,children:t})},Z=function(e){var t=e.entity;return console.log("NO LinkedLogsButton",t),Object(d.jsx)(d.Fragment,{children:t.logs&&t.logs.length>0?function(e){return console.log("NO computeLink logs=",e.logs),Object(d.jsx)(o.b,{className:"button",to:{pathname:"/linkedlogs",state:{logs:e.logs}},children:"Logs"})}(t):""})},$=function(e){var t=e.tableData,n=e.columns,a=e.actions;return console.log("tableData",t),Object(d.jsx)("tbody",{children:t.map((function(e){return console.log("tableData",t),Object(d.jsx)("tr",{children:n.map((function(t){var n=t.accessor,c=t.func;return function(e,t,n){console.log("NO generateTD data",e);var c=e[n]?e[n]:"\u2014\u2014";return"action"==n?Object(d.jsx)("td",{children:a.map((function(t){var n=t.text,a=t.callback,c=t.type,r=t.id;return"nolinked"==c?Object(d.jsx)(Y,{text:n,callback:function(){return a(e.id)}},r):"linked"==c?Object(d.jsx)(Z,{entity:e},r):""}))},n):t?Object(d.jsx)("td",{children:t(e)},n):Object(d.jsx)("td",{children:c},n)}(e,c,n)}))},e.id)}))})},ee=function(e){var t=e.columns,n=e.handleSorting,c=Object(a.useState)(""),r=Object(B.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)("asc"),u=Object(B.a)(o,2),l=u[0],b=u[1];return Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:t.map((function(e){var t=e.label,a=e.accessor,c=e.sortable,r=c?s===a&&"asc"===l?"up":s===a&&"desc"===l?"down":"default":"";return Object(d.jsx)("th",{onClick:c?function(){return function(e){var t=e===s&&"asc"===l?"desc":"asc";i(e),b(t),n(e,t)}(a)}:null,className:r,children:t},a)}))})})};function te(e,t){return Object(m.a)(e).sort((function(e,n){var a=t.filter((function(e){return e.sortbyOrder})),c=Object.assign.apply(Object,[{}].concat(Object(m.a)(a))),r=c.accessor,s=void 0===r?"id":r,i=c.sortbyOrder,o=void 0===i?"asc":i;if(null===e[s])return 1;if(null===n[s])return-1;if(null===e[s]&&null===n[s])return 0;var u=e[s].toString().localeCompare(n[s].toString(),"en",{numeric:!0});return"asc"===o?u:-u}))}n(250);var ne=function(e){var t=e.caption,n=e.data,c=e.columns,r=e.actions,s=function(e,t){var n=Object(a.useState)([]),c=Object(B.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)(Object(g.a)(v.a.mark((function n(){var a;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:a=n.sent,s(te(a,t));case 4:case"end":return n.stop()}}),n)}))),[e]),[r,function(e,t){e&&s((function(n){return Object(m.a)(n).sort((function(n,a){return null===n[e]?1:null===a[e]?-1:null===n[e]&&null===a[e]?0:n[e].toString().localeCompare(a[e].toString(),"en",{numeric:!0})*("asc"===t?1:-1)}))}))}]}(n,c),i=Object(B.a)(s,2),o=i[0],u=i[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("table",{className:"table",children:[Object(d.jsx)("caption",{children:t}),Object(d.jsx)(ee,{columns:c,handleSorting:u}),Object(d.jsx)($,{columns:c,tableData:o,actions:r})]})})};var ae=function(e){var t=e.entities,n=e.fooCb,c=e.filterByField,r=Object(a.useState)(""),s=Object(B.a)(r,2),i=s[0],o=s[1],u=Object(a.useState)([]),l=Object(B.a)(u,2),b=l[0],h=l[1];return Object(a.useEffect)((function(){console.log("name",i),console.log("entities",t),n(""===i?t:b),console.log("foundentities",b)}),[i]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"search",value:i,onChange:function(e){var n=e.target.value;if(""!==n){var a=t.filter((function(e){return e[c].toLowerCase().startsWith(n.toLowerCase())}));h(a)}else h(t);o(n)},className:"input",placeholder:"Filter by "+c.toUpperCase()}),Object(d.jsx)("button",{onClick:function(){return o("")},children:"Reset"})]})},ce=function(e){var t=e.columns,n=e.entities,c=e.caption,r=e.actions,s=e.title,i=e.ADD_BUTTONS,u=e.filterByField,l=Object(a.useState)([]),b=Object(B.a)(l,2),h=b[0],p=b[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:s}),i.map((function(e){var t=e.text,n=e.link,a=e.id;return Object(d.jsx)(o.b,{to:n,className:"button",children:t},a)})),Object(d.jsx)("br",{}),Object(d.jsx)(ae,{filterByField:u,entities:n,fooCb:function(e){return p(e)}}),Object(d.jsx)(ne,{caption:c,data:h&&h.length>0?h:n,columns:t,actions:r})]})},re=function(e){var t=new L,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(d.jsx)(o.b,{to:"/namespace/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:424542,type:"nolinked",text:"Delete",callback:function(e){return b(e)}},{id:182727782,type:"linked"}],r=Object(a.useState)([]),s=Object(B.a)(r,2),u=s[0],l=s[1],b=function(e){console.log("deleting",e),t.deleteNamespace(e,(function(){var t=u.filter((function(t){return t.id!=e}));l(t)}))};return Object(a.useEffect)(Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNamespaces();case 2:return n=e.sent,console.log("namespacesData",n),l(n),e.abrupt("return",(function(){console.log("cleanup")}));case 6:case"end":return e.stop()}}),e)}))),[]),console.log("namespaces",u),Object(d.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/namespaces",entities:u,columns:n,actions:c,title:"NAMESPACES",ADD_BUTTONS:[{id:77932970289,text:"Add Namespace",link:"/newnamespace"}],filterByField:"name"}))},se=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).store=new L,a.format=new R,a.namespaceInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.namespaceInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,r=n.description,e.next=8,this.store.updateNamespace(a,{name:c,description:r});case 8:e.sent,this.props.notify_success("namespace updated"),console.log(this.props),e.next=16;break;case 13:this.store.addNamespace({name:this.state.name,description:this.state.description},(function(e){console.log("res",e);var t=e.data;s.load(t.id)})),this.setState({mode:"EDIT"}),this.props.notify_success("namespace added");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteNamespace(this.state.id),this.props.notify_success("namespace deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getNamespace(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,r=e.createdAt,s=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:r,updatedAt:s,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(u.e)(this.props.location.pathname,{path:"/namespace/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevNamespace",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextNamespace",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextNamespace")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,r=t.mode,s=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",s=this.format.string(s),i=this.format.string(i),n?Object(d.jsx)(u.a,{to:"/"}):Object(d.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(d.jsxs)("div",{className:"header_group",children:[Object(d.jsx)("h3",{children:"NAMESPACE"}),Object(d.jsx)("h2",{children:r})]}),Object(d.jsxs)("div",{className:"title_description_group",children:[Object(d.jsx)("div",{className:"item",children:Object(d.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Name*"}),s?"":Object(d.jsx)("h5",{children:"This field is required"}),Object(d.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:s})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Description"}),Object(d.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(d.jsxs)("div",{className:"metadata_group",children:[Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Created At"}),Object(d.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Updated At"}),Object(d.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(d.jsxs)("div",{className:"button_group",children:[Object(d.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(d.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(d.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(d.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),ie=function(e){var t=new L,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(d.jsx)(o.b,{to:"/tag/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:736768173678168,type:"nolinked",text:"Delete",callback:function(e){return b(e)}},{id:9390019109,type:"linked"}],r=Object(a.useState)([]),s=Object(B.a)(r,2),u=s[0],l=s[1],b=function(e){console.log("deleting",e),t.deleteTag(e,(function(){var t=u.filter((function(t){return t.id!=e}));l(t)}))};return Object(a.useEffect)(Object(g.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTags();case 2:return n=e.sent,l(n),e.abrupt("return",(function(){console.log("cleanup"),l([])}));case 5:case"end":return e.stop()}}),e)}))),[]),console.log("tags",u),Object(d.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/tags",entities:u,columns:n,actions:c,title:"TAGS",ADD_BUTTONS:[{id:54574756767673,text:"Add Tag",link:"/newtag"}],filterByField:"name"}))},oe=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).store=new L,a.format=new R,a.tagInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.tagInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,c,r,s=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,r=n.description,e.next=8,this.store.updateTag(a,{name:c,description:r});case 8:e.sent,this.props.notify_success("tag updated"),console.log(this.props),e.next=15;break;case 13:this.store.addTag({name:this.state.name,description:this.state.description},(function(e){var t=e.data;s.load(t.id)})),this.props.notify_success("tag added");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteTag(this.state.id),this.props.notify_success("tag deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getTag(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,r=e.createdAt,s=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:r,updatedAt:s,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(u.e)(this.props.location.pathname,{path:"/tag/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevTag",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextTag",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextTag")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,r=t.mode,s=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",s=this.format.string(s),i=this.format.string(i),n?Object(d.jsx)(u.a,{to:"/"}):Object(d.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(d.jsxs)("div",{className:"header_group",children:[Object(d.jsx)("h3",{children:"TAG"}),Object(d.jsx)("h2",{children:r})]}),Object(d.jsxs)("div",{className:"title_description_group",children:[Object(d.jsx)("div",{className:"item",children:Object(d.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Name*"}),s?"":Object(d.jsx)("h5",{children:"This field is required"}),Object(d.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:s})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Description"}),Object(d.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(d.jsxs)("div",{className:"metadata_group",children:[Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Created At"}),Object(d.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("label",{children:"Updated At"}),Object(d.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(d.jsxs)("div",{className:"button_group",children:[Object(d.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(d.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(d.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(d.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),ue=function(e){var t=new L,n=new R,c=[{label:"ID",accessor:"id",sortable:!0},{label:"Title",accessor:"title",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(d.jsx)(o.b,{to:"/log/".concat(e.id),children:e.title})}},{label:"Description",accessor:"Description",sortable:!0},{label:"CreatedAt",accessor:"createdAt",sortable:!0,func:function(e){return n.date(e.createdAt)}},{label:"Heart",accessor:"heart",sortable:!0,func:function(e){return e.heart?Object(d.jsx)(D,{}):""}},{label:"Namespace",accessor:"namespace",sortable:!0,func:function(e){return Object(d.jsx)(o.b,{to:"/namespace/".concat(e.id),children:e.namespace})}},{label:"Type",accessor:"type",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],r=[{id:0xfb95796e0fb,type:"nolinked",text:"Delete",callback:function(e){return p(e)}}],s=Object(a.useState)([]),u=Object(B.a)(s,2),l=u[0],b=u[1],h=function(e){return e.map((function(e){var t;console.log("NO log.namespace",e);var n=(null===(t=e.namespace)||void 0===t?void 0:t.name)?e.namespace.name:e.namespace?e.namespace:"";return Object(i.a)(Object(i.a)({},e),{},{namespace:n})}))},p=function(e){console.log("deleting",e),t.deleteLog(e,(function(){var t=l.filter((function(t){return t.id!=e}));b(t)}))};return Object(a.useEffect)(Object(g.a)(v.a.mark((function n(){var a,c,r,s,i,o,u;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getLogs();case 2:return i=n.sent,o=(null===e||void 0===e||null===(a=e.location)||void 0===a||null===(c=a.state)||void 0===c?void 0:c.logs)?e.location.state.logs:i,console.log("props?.location?.state?.logs ?",null===e||void 0===e||null===(r=e.location)||void 0===r||null===(s=r.state)||void 0===s?void 0:s.logs),u=h(o),console.log("processed_data",u),b(u),n.abrupt("return",(function(){console.log("cleanup")}));case 9:case"end":return n.stop()}}),n)}))),[]),Object(d.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/",entities:l,columns:c,actions:r,title:"LOGS",ADD_BUTTONS:[{id:74373873,text:"Add Text Log",link:"/newtextlog"},{id:53657667763,text:"Add Audio Log",link:"/newaudiolog"}],filterByField:"title"}))},le=function(){return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(l.a,{}),Object(d.jsxs)(o.a,{children:[Object(d.jsx)(f,{}),Object(d.jsx)(u.b,{path:"/",exact:!0,render:function(e){return Object(d.jsx)(ue,Object(i.a)({},e))}}),Object(d.jsx)(u.b,{path:"/dearlog-webapp",exact:!0,render:function(e){return Object(d.jsx)(ue,Object(i.a)({},e))}}),Object(d.jsx)(u.b,{async:!0,path:"/linkedlogs",exact:!0,render:function(e){return Object(d.jsx)(ue,Object(i.a)({},e))}}),Object(d.jsx)(u.b,{path:"/log/:id",exact:!0,render:function(e){return Object(d.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/namespace",exact:!0,render:function(e){return Object(d.jsx)(re,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/namespace/:id",exact:!0,render:function(e){return Object(d.jsx)(se,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/newnamespace",exact:!0,render:function(e){return Object(d.jsx)(se,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/tag",exact:!0,render:function(e){return Object(d.jsx)(ie,Object(i.a)({},e))}}),Object(d.jsx)(u.b,{path:"/tag/:id",exact:!0,render:function(e){return Object(d.jsx)(oe,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/newtag",exact:!0,render:function(e){return Object(d.jsx)(oe,Object(i.a)(Object(i.a)({},e),{},{notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/newtextlog",exact:!0,render:function(e){return Object(d.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{type:"text",notify_error:l.b.error,notify_success:l.b.success}))}}),Object(d.jsx)(u.b,{path:"/newaudiolog",exact:!0,render:function(e){return Object(d.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{type:"audio",notify_error:l.b.error,notify_success:l.b.success}))}})]})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,265)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(le,{})}),document.getElementById("root")),de()},68:function(e,t,n){}},[[251,1,2]]]);
//# sourceMappingURL=main.6a97a4de.chunk.js.map