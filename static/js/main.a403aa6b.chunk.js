(this["webpackJsonpdearlog-webapp"]=this["webpackJsonpdearlog-webapp"]||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(31),r=n.n(s),i=(n(87),n(4)),o=n(15),l=n(11),u=n(19),d=(n(88),n(89),n(90),n(13)),h=n(18),b=n(20),p=n(21),j=n(1),f=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("header",{children:[Object(j.jsx)(o.b,{to:"/",className:"logo",children:"DEARLOG"}),Object(j.jsx)(o.b,{to:"/namespace",className:"button",children:"Namespace"}),Object(j.jsx)(o.b,{to:"/tag",className:"button",children:"Tag"})]})}}]),n}(c.a.Component),m=n(9),O=n(8),g=n.n(O),v=n(12),x=n(5),y=n(14),k=(n(47),n(157)),C=n(158);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var D=Object(a.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,s=e.size,r=void 0===s?24:s,i="false"==e.fill?"none":n,o=S(e,["color","size","fill"]);return c.a.createElement("svg",N({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:i,stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),c.a.createElement("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}));D.displayName="Heart";var A=D,w=n(17),_=n.n(w),T="https://dearlog-api.herokuapp.com",I=function(){function e(){Object(d.a)(this,e),this.getNextPrevLog=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs/nextprev/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLog=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLogs=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/logs"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.deleteLog=function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),_.a.delete("".concat(T,"/api/logs/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getNamespaces=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/namespaces"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getNamespace=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/namespaces/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addNamespace=function(e,t){_.a.post("".concat(T,"/api/namespaces"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteNamespace=function(){var e=Object(v.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),_.a.delete("".concat(T,"/api/namespaces/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getTags=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/tags"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getTag=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(T,"/api/tags/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTag=function(e,t){_.a.post("".concat(T,"/api/tags"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteTag=function(e,t){console.log(e),_.a.delete("".concat(T,"/api/tags/").concat(e)).then(t).catch((function(e){return console.log(e)}))}}return Object(h.a)(e,[{key:"addLog",value:function(e,t){_.a.post("".concat(T,"/api/logs"),e).then(t).catch((function(e){return console.log(e)}))}},{key:"updateLog",value:function(e,t){_.a.put("".concat(T,"/api/logs/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateNamespace",value:function(e,t){_.a.put("".concat(T,"/api/namespaces/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateTag",value:function(e,t){_.a.put("".concat(T,"/api/tags/").concat(e),t).then((function(e){console.log(e.data)}))}}]),e}(),L=new Intl.DateTimeFormat("fr",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}),E=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"date",value:function(e){return L.format(new Date(e))}},{key:"string",value:function(e){return e||""}}]),e}(),R=(n(48),n(51)),M=n.n(R),P=n(79),F=n(80),B=(n(139),function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={value:a.props.content,selectedTab:"write"},a.handleContentChange=a.handleContentChange.bind(Object(y.a)(a)),a.handleTab=a.handleTab.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleContentChange",value:function(e){this.setState({value:e}),this.props.onChangeContent(e)}},{key:"handleTab",value:function(e){this.setState({selectedTab:e})}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"container",style:{width:"99%",padding:"10px"},children:Object(j.jsx)(M.a,{value:this.state.value,onChange:this.handleContentChange,selectedTab:this.state.selectedTab,onTabChange:this.handleTab,generateMarkdownPreview:function(e){return Promise.resolve(Object(j.jsx)(P.a,{children:e,remarkPlugins:[F.a]}))},childProps:{writeButton:{tabIndex:-1}},minEditorHeight:200,minPreviewHeight:200})})})}}]),n}(c.a.Component)),U=n(56),z=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).store=new I,a.format=new E,a.logInit={id:null,heart:!1,title:"",description:"",createdAt:"",updatedAt:"",namespace:null,tag:"",type:"",content:"",namespacesAvaible:[],tags:[],tagsAvaible:[]},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.logInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a.handleContentChange=a.handleContentChange.bind(Object(y.a)(a)),a.handleNameSpaceSelect=a.handleNameSpaceSelect.bind(Object(y.a)(a)),a.handleNameSpaceCreate=a.handleNameSpaceCreate.bind(Object(y.a)(a)),a.handleTagSelect=a.handleTagSelect.bind(Object(y.a)(a)),a.handleTagCreate=a.handleTagCreate.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,c,s,r,i,o,l,u=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.title){e.next=4;break}return this.props.notify_error("Title is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.title,s=n.description,r=n.heart,i=n.namespace,o=n.tags,l=n.content,e.next=8,this.store.updateLog(a,{title:c,description:s,heart:r,namespace:i,tags:o,content:l});case 8:e.sent,this.props.notify_success("log updated"),console.log(this.props),e.next=15;break;case 13:this.store.addLog({title:this.state.title,description:this.state.description,heart:this.state.heart,namespace:this.state.namespace,tags:this.state.tags,type:this.props.type,content:this.state.content},(function(e){console.log("res",e);var t=e.data;u.load(t.id)})),this.props.notify_success("log added");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleHeart",value:function(e){e.preventDefault(),this.setState({heart:!this.state.heart})}},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteLog(this.state.id),this.props.notify_success("log deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault();var t,n={title:(t=this.logInit).title,description:t.description,heart:t.heart,namespace:t.namespace,tag:t.tag,content:t.content};this.setState(n)}},{key:"load",value:function(e){var t=this;this.store.getLog(e).then((function(n){console.log("data",n);var a=n.id,c=n.title,s=n.description,r=n.createdAt,o=n.heart,l=n.updatedAt,u=n.namespace,d=n.tags,h=n.type,b=n.content,p=u?Object(i.a)(Object(i.a)({},{value:u.name,label:u.name}),u):[],j=t.addValueAndLabelToSelect(d);console.log(p),t.setState({content:b}),t.setState({id:a,title:c,description:s,createdAt:r,heart:o,updatedAt:l,namespace:p,tags:j,type:h,mode:"EDIT"}),t.store.getNextPrevLog(e).then((function(e){t.setState(e)}))})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/log/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){var e=this.props.type;this.setState({mode:"ADD",type:e})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:return e.next=12,this.store.getNamespaces();case 12:return a=e.sent,console.log("dataNamespace",a),this.setState({namespacesAvaible:this.addValueAndLabelToSelect(a)}),e.next=17,this.store.getTags();case 17:c=e.sent,this.setState({tagsAvaible:this.addValueAndLabelToSelect(c)});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addValueAndLabelToSelect",value:function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{value:e.name,label:e.name})}))}},{key:"handleNameSpaceSelect",value:function(e){console.log("selected",e),this.setState({namespace:e})}},{key:"handleNameSpaceCreate",value:function(e){var t=this;this.store.addNamespace({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(m.a)(t.state.namespacesAvaible),[a])),t.setState({namespacesAvaible:[].concat(Object(m.a)(t.state.namespacesAvaible),[a]),namespace:a})}))}},{key:"handleTagSelect",value:function(e){this.setState({tags:e})}},{key:"handleTagCreate",value:function(e){var t=this;this.store.addTag({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(m.a)(t.state.tagsAvaible),[a])),t.setState({tagsAvaible:[].concat(Object(m.a)(t.state.tagsAvaible),[a]),tag:a})}))}},{key:"onPrevLog",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextLog",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextLog")}},{key:"renderSwitch",value:function(e){switch(e){case"text":return Object(j.jsx)(B,{content:this.state.content,onChangeContent:this.handleContentChange});default:return"foo"}}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.heart,a=t.isRedirect,c=t.createdAt,s=t.updatedAt,r=t.mode,o=t.title,u=t.description,d=t.content,h=t.namespace,b=t.tag,p=t.type,f=t.namespacesAvaible;s=(c=c?this.format.date(c):"")?this.format.date(s):"",o=this.format.string(o),u=this.format.string(u),b=this.format.string(b),d=this.format.string(d);var m={control:function(e){return Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"white"})},option:function(e){return Object(i.a)(Object(i.a)({},e),{},{color:"#000",cursor:"default"})}};return a?Object(j.jsx)(l.a,{to:"/"}):Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsxs)("div",{className:"header_group",children:[Object(j.jsx)("h1",{className:"capital",children:p}),Object(j.jsx)("h3",{children:r})]}),Object(j.jsxs)("div",{className:"title_description_group",children:[Object(j.jsx)("div",{className:"item",children:Object(j.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Title*"}),o?"":Object(j.jsx)("h5",{children:"This field is required"}),Object(j.jsx)("input",{id:"title",name:"title",className:"title_input",placeholder:"Title",type:"text",onChange:function(t){return e.handleChange(t)},value:o})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:u})]})]}),Object(j.jsxs)("div",{className:"metadata_group",children:[Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Created At"}),Object(j.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Updated At"}),Object(j.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:s})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Heart"}),Object(j.jsx)("button",{onClick:function(t){return e.toggleHeart(t)},children:Object(j.jsx)(A,{fill:n?"true":"false",color:"red"})})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Namespace"}),Object(j.jsx)(U.a,{value:h,onChange:this.handleNameSpaceSelect,onCreateOption:this.handleNameSpaceCreate,options:f,isClearable:!0,styles:m})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Tag"}),Object(j.jsx)(U.a,{value:this.state.tags,onChange:this.handleTagSelect,onCreateOption:this.handleTagCreate,options:this.state.tagsAvaible,isClearable:!0,isMulti:!0,styles:m})]})]}),Object(j.jsxs)("div",{className:"content_group",children:[this.state.prev?Object(j.jsx)("button",{className:"before_button",onClick:function(t){return e.onPrevLog(t)},children:Object(j.jsx)(k.a,{})}):"",this.renderSwitch(this.state.type),this.state.next?Object(j.jsx)("button",{className:"after_button",onClick:function(t){return e.onNextLog(t)},children:Object(j.jsx)(C.a,{})}):""]}),Object(j.jsxs)("div",{className:"button_group",children:[Object(j.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(j.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(j.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(j.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),H=n(16),G=function(e){var t=e.text,n=e.callback;return Object(j.jsx)("button",{onClick:n,children:t})},V=function(e){var t=e.entity;return console.log("NO LinkedLogsButton",t),Object(j.jsx)(j.Fragment,{children:t.logs&&t.logs.length>0?function(e){return console.log("NO computeLink logs=",e.logs),Object(j.jsx)(o.b,{className:"button",to:{pathname:"/linkedlogs",state:{logs:e.logs}},children:"Logs"})}(t):""})},q=function(e){var t=e.tableData,n=e.columns,a=e.actions;return console.log("tableData",t),Object(j.jsx)("tbody",{children:t.map((function(e){return console.log("tableData",t),Object(j.jsx)("tr",{children:n.map((function(t){var n=t.accessor,c=t.func;return function(e,t,n){console.log("NO generateTD data",e);var c=e[n]?e[n]:"\u2014\u2014";return"action"==n?Object(j.jsx)("td",{children:a.map((function(t){var n=t.text,a=t.callback,c=t.type,s=t.id;return"nolinked"==c?Object(j.jsx)(G,{text:n,callback:function(){return a(e.id)}},s):"linked"==c?Object(j.jsx)(V,{entity:e},s):""}))},n):t?Object(j.jsx)("td",{children:t(e)},n):Object(j.jsx)("td",{children:c},n)}(e,c,n)}))},e.id)}))})},J=function(e){var t=e.columns,n=e.handleSorting,c=Object(a.useState)(""),s=Object(H.a)(c,2),r=s[0],i=s[1],o=Object(a.useState)("asc"),l=Object(H.a)(o,2),u=l[0],d=l[1];return Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:t.map((function(e){var t=e.label,a=e.accessor,c=e.sortable,s=c?r===a&&"asc"===u?"up":r===a&&"desc"===u?"down":"default":"";return Object(j.jsx)("th",{onClick:c?function(){return function(e){var t=e===r&&"asc"===u?"desc":"asc";i(e),d(t),n(e,t)}(a)}:null,className:s,children:t},a)}))})})};function W(e,t){return Object(m.a)(e).sort((function(e,n){var a=t.filter((function(e){return e.sortbyOrder})),c=Object.assign.apply(Object,[{}].concat(Object(m.a)(a))),s=c.accessor,r=void 0===s?"id":s,i=c.sortbyOrder,o=void 0===i?"asc":i;if(null===e[r])return 1;if(null===n[r])return-1;if(null===e[r]&&null===n[r])return 0;var l=e[r].toString().localeCompare(n[r].toString(),"en",{numeric:!0});return"asc"===o?l:-l}))}n(148);var K=function(e){var t=e.caption,n=e.data,c=e.columns,s=e.actions,r=function(e,t){var n=Object(a.useState)([]),c=Object(H.a)(n,2),s=c[0],r=c[1];return Object(a.useEffect)(Object(v.a)(g.a.mark((function n(){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:a=n.sent,r(W(a,t));case 4:case"end":return n.stop()}}),n)}))),[e]),[s,function(e,t){e&&r((function(n){return Object(m.a)(n).sort((function(n,a){return null===n[e]?1:null===a[e]?-1:null===n[e]&&null===a[e]?0:n[e].toString().localeCompare(a[e].toString(),"en",{numeric:!0})*("asc"===t?1:-1)}))}))}]}(n,c),i=Object(H.a)(r,2),o=i[0],l=i[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("caption",{children:t}),Object(j.jsx)(J,{columns:c,handleSorting:l}),Object(j.jsx)(q,{columns:c,tableData:o,actions:s})]})})};var Q=function(e){var t=e.entities,n=e.fooCb,c=e.filterByField,s=Object(a.useState)(""),r=Object(H.a)(s,2),i=r[0],o=r[1],l=Object(a.useState)([]),u=Object(H.a)(l,2),d=u[0],h=u[1];return Object(a.useEffect)((function(){console.log("name",i),console.log("entities",t),n(""===i?t:d),console.log("foundentities",d)}),[i]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("input",{type:"search",value:i,onChange:function(e){var n=e.target.value;if(""!==n){var a=t.filter((function(e){return e[c].toLowerCase().startsWith(n.toLowerCase())}));h(a)}else h(t);o(n)},className:"input",placeholder:"Filter by "+c.toUpperCase()}),Object(j.jsx)("button",{onClick:function(){return o("")},children:"Reset"})]})},X=function(e){var t=e.columns,n=e.entities,c=e.caption,s=e.actions,r=e.title,i=e.ADD_BUTTONS,l=e.filterByField,u=Object(a.useState)([]),d=Object(H.a)(u,2),h=d[0],b=d[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:r}),i.map((function(e){var t=e.text,n=e.link,a=e.id;return Object(j.jsx)(o.b,{to:n,className:"button",children:t},a)})),Object(j.jsx)("br",{}),Object(j.jsx)(Q,{filterByField:l,entities:n,fooCb:function(e){return b(e)}}),Object(j.jsx)(K,{caption:c,data:h&&h.length>0?h:n,columns:t,actions:s})]})},Y=function(e){var t=new I,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(j.jsx)(o.b,{to:"/namespace/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:424542,type:"nolinked",text:"Delete",callback:function(e){return d(e)}},{id:182727782,type:"linked"}],s=Object(a.useState)([]),r=Object(H.a)(s,2),l=r[0],u=r[1],d=function(e){console.log("deleting",e),t.deleteNamespace(e,(function(){var t=l.filter((function(t){return t.id!=e}));u(t)}))};return Object(a.useEffect)(Object(v.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNamespaces();case 2:return n=e.sent,console.log("namespacesData",n),u(n),e.abrupt("return",(function(){console.log("cleanup")}));case 6:case"end":return e.stop()}}),e)}))),[]),console.log("namespaces",l),Object(j.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{caption:"/namespaces",entities:l,columns:n,actions:c,title:"NAMESPACES",ADD_BUTTONS:[{id:77932970289,text:"Add Namespace",link:"/newnamespace"}],filterByField:"name"}))},Z=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).store=new I,a.format=new E,a.namespaceInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.namespaceInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,c,s,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,s=n.description,e.next=8,this.store.updateNamespace(a,{name:c,description:s});case 8:e.sent,this.props.notify_success("namespace updated"),console.log(this.props),e.next=16;break;case 13:this.store.addNamespace({name:this.state.name,description:this.state.description},(function(e){console.log("res",e);var t=e.data;r.load(t.id)})),this.setState({mode:"EDIT"}),this.props.notify_success("namespace added");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteNamespace(this.state.id),this.props.notify_success("namespace deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getNamespace(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,s=e.createdAt,r=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:s,updatedAt:r,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/namespace/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevNamespace",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextNamespace",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextNamespace")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,s=t.mode,r=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",r=this.format.string(r),i=this.format.string(i),n?Object(j.jsx)(l.a,{to:"/"}):Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsxs)("div",{className:"header_group",children:[Object(j.jsx)("h3",{children:"NAMESPACE"}),Object(j.jsx)("h2",{children:s})]}),Object(j.jsxs)("div",{className:"title_description_group",children:[Object(j.jsx)("div",{className:"item",children:Object(j.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Name*"}),r?"":Object(j.jsx)("h5",{children:"This field is required"}),Object(j.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:r})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(j.jsxs)("div",{className:"metadata_group",children:[Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Created At"}),Object(j.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Updated At"}),Object(j.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(j.jsxs)("div",{className:"button_group",children:[Object(j.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(j.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(j.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(j.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),$=function(e){var t=new I,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(j.jsx)(o.b,{to:"/tag/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:736768173678168,type:"nolinked",text:"Delete",callback:function(e){return d(e)}},{id:9390019109,type:"linked"}],s=Object(a.useState)([]),r=Object(H.a)(s,2),l=r[0],u=r[1],d=function(e){console.log("deleting",e),t.deleteTag(e,(function(){var t=l.filter((function(t){return t.id!=e}));u(t)}))};return Object(a.useEffect)(Object(v.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTags();case 2:return n=e.sent,u(n),e.abrupt("return",(function(){console.log("cleanup"),u([])}));case 5:case"end":return e.stop()}}),e)}))),[]),console.log("tags",l),Object(j.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{caption:"/tags",entities:l,columns:n,actions:c,title:"TAGS",ADD_BUTTONS:[{id:54574756767673,text:"Add Tag",link:"/newtag"}],filterByField:"name"}))},ee=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).store=new I,a.format=new E,a.tagInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.tagInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(y.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(x.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a,c,s,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,s=n.description,e.next=8,this.store.updateTag(a,{name:c,description:s});case 8:e.sent,this.props.notify_success("tag updated"),console.log(this.props),e.next=15;break;case 13:this.store.addTag({name:this.state.name,description:this.state.description},(function(e){var t=e.data;r.load(t.id)})),this.props.notify_success("tag added");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteTag(this.state.id),this.props.notify_success("tag deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getTag(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,s=e.createdAt,r=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:s,updatedAt:r,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/tag/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevTag",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextTag",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextTag")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,s=t.mode,r=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",r=this.format.string(r),i=this.format.string(i),n?Object(j.jsx)(l.a,{to:"/"}):Object(j.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(j.jsxs)("div",{className:"header_group",children:[Object(j.jsx)("h3",{children:"TAG"}),Object(j.jsx)("h2",{children:s})]}),Object(j.jsxs)("div",{className:"title_description_group",children:[Object(j.jsx)("div",{className:"item",children:Object(j.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Name*"}),r?"":Object(j.jsx)("h5",{children:"This field is required"}),Object(j.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:r})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Description"}),Object(j.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(j.jsxs)("div",{className:"metadata_group",children:[Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Created At"}),Object(j.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(j.jsxs)("div",{className:"item",children:[Object(j.jsx)("label",{children:"Updated At"}),Object(j.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(j.jsxs)("div",{className:"button_group",children:[Object(j.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(j.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(j.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(j.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),te=function(e){var t=new I,n=new E,c=[{label:"ID",accessor:"id",sortable:!0},{label:"Title",accessor:"title",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(j.jsx)(o.b,{to:"/log/".concat(e.id),children:e.title})}},{label:"Description",accessor:"Description",sortable:!0},{label:"CreatedAt",accessor:"createdAt",sortable:!0,func:function(e){return n.date(e.createdAt)}},{label:"Heart",accessor:"heart",sortable:!0,func:function(e){return e.heart?Object(j.jsx)(A,{}):""}},{label:"Namespace",accessor:"namespace",sortable:!0,func:function(e){return Object(j.jsx)(o.b,{to:"/namespace/".concat(e.id),children:e.namespace})}},{label:"Action",accessor:"action",sortable:!1}],s=[{id:0xfb95796e0fb,type:"nolinked",text:"Delete",callback:function(e){return b(e)}}],r=Object(a.useState)([]),l=Object(H.a)(r,2),u=l[0],d=l[1],h=function(e){return e.map((function(e){var t;console.log("NO log.namespace",e);var n=(null===(t=e.namespace)||void 0===t?void 0:t.name)?e.namespace.name:e.namespace?e.namespace:"";return Object(i.a)(Object(i.a)({},e),{},{namespace:n})}))},b=function(e){console.log("deleting",e),t.deleteLog(e,(function(){var t=u.filter((function(t){return t.id!=e}));d(t)}))};return Object(a.useEffect)(Object(v.a)(g.a.mark((function n(){var a,c,s,r,i,o,l;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getLogs();case 2:return i=n.sent,o=(null===e||void 0===e||null===(a=e.location)||void 0===a||null===(c=a.state)||void 0===c?void 0:c.logs)?e.location.state.logs:i,console.log("props?.location?.state?.logs ?",null===e||void 0===e||null===(s=e.location)||void 0===s||null===(r=s.state)||void 0===r?void 0:r.logs),l=h(o),console.log("processed_data",l),d(l),n.abrupt("return",(function(){console.log("cleanup")}));case 9:case"end":return n.stop()}}),n)}))),[]),Object(j.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{caption:"/",entities:u,columns:c,actions:s,title:"LOGS",ADD_BUTTONS:[{id:74373873,text:"Add Text Log",link:"/newtextlog"}],filterByField:"title"}))},ne=function(){return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(u.a,{}),Object(j.jsxs)(o.a,{children:[Object(j.jsx)(f,{}),Object(j.jsx)(l.b,{path:"/",exact:!0,render:function(e){return Object(j.jsx)(te,Object(i.a)({},e))}}),Object(j.jsx)(l.b,{path:"/dearlog-webapp",exact:!0,render:function(e){return Object(j.jsx)(te,Object(i.a)({},e))}}),Object(j.jsx)(l.b,{async:!0,path:"/linkedlogs",exact:!0,render:function(e){return Object(j.jsx)(te,Object(i.a)({},e))}}),Object(j.jsx)(l.b,{path:"/log/:id",exact:!0,render:function(e){return Object(j.jsx)(z,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/namespace",exact:!0,render:function(e){return Object(j.jsx)(Y,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/namespace/:id",exact:!0,render:function(e){return Object(j.jsx)(Z,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/newnamespace",exact:!0,render:function(e){return Object(j.jsx)(Z,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/tag",exact:!0,render:function(e){return Object(j.jsx)($,Object(i.a)({},e))}}),Object(j.jsx)(l.b,{path:"/tag/:id",exact:!0,render:function(e){return Object(j.jsx)(ee,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/newtag",exact:!0,render:function(e){return Object(j.jsx)(ee,Object(i.a)(Object(i.a)({},e),{},{notify_error:u.b.error,notify_success:u.b.success}))}}),Object(j.jsx)(l.b,{path:"/newtextlog",exact:!0,render:function(e){return Object(j.jsx)(z,Object(i.a)(Object(i.a)({},e),{},{type:"text",notify_error:u.b.error,notify_success:u.b.success}))}})]})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,159)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ne,{})}),document.getElementById("root")),ae()},47:function(e,t,n){},87:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.a403aa6b.chunk.js.map