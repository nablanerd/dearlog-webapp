(this["webpackJsonpdearlog-webapp"]=this["webpackJsonpdearlog-webapp"]||[]).push([[0],{137:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},231:function(e,t){},233:function(e,t){},250:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(40),s=n.n(r),i=(n(137),n(5)),o=n(9),u=n(16),l=n(14),d=n(20),b=(n(138),n(139),n(140),n(1));var h=n(13),p=n(17),j=n(18),f=n(19),m=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("header",{children:[Object(b.jsx)(u.b,{to:"/",className:"logo",children:"DEARLOG"}),Object(b.jsx)(u.b,{to:"/namespace",className:"button",children:"Namespace"}),Object(b.jsx)(u.b,{to:"/tag",className:"button",children:"Tag"})]})}}]),n}(c.a.Component),O=(c.a.Component,n(10)),v=n(7),g=n.n(v),x=n(12),y=n(6),k=n(15),S=(n(68),n(263)),N=n(264);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var D=Object(a.forwardRef)((function(e,t){var n=e.color,a=void 0===n?"currentColor":n,r=e.size,s=void 0===r?24:r,i="false"==e.fill?"none":n,o=A(e,["color","size","fill"]);return c.a.createElement("svg",C({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:i,stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),c.a.createElement("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"}))}));D.displayName="Heart";var w=D,_=n(21),T=n.n(_),L="https://dearlog-api.herokuapp.com",I=function(){function e(){Object(h.a)(this,e),this.getSocketAudioUrl=function(){return"".concat(L,"/audio")},this.getAudioStreamingUrl=function(e){return"".concat(L,"/audio/").concat(e)},this.getNextPrevLog=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/logs/nextprev/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLog=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/logs/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getLogs=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/logs"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.deleteLog=function(){var e=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),T.a.delete("".concat(L,"/api/logs/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getNamespaces=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/namespaces"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getNamespace=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/namespaces/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addNamespace=function(e,t){T.a.post("".concat(L,"/api/namespaces"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteNamespace=function(){var e=Object(x.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),T.a.delete("".concat(L,"/api/namespaces/").concat(t)).then(n).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getTags=Object(x.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/tags"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getTag=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(L,"/api/tags/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addTag=function(e,t){T.a.post("".concat(L,"/api/tags"),e).then(t).catch((function(e){return console.log(e)}))},this.deleteTag=function(e,t){console.log(e),T.a.delete("".concat(L,"/api/tags/").concat(e)).then(t).catch((function(e){return console.log(e)}))}}return Object(p.a)(e,[{key:"addLog",value:function(e,t){T.a.post("".concat(L,"/api/logs"),e).then(t).catch((function(e){return console.log(e)}))}},{key:"updateLog",value:function(e,t){T.a.put("".concat(L,"/api/logs/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateNamespace",value:function(e,t){T.a.put("".concat(L,"/api/namespaces/").concat(e),t).then((function(e){console.log(e.data)}))}},{key:"updateTag",value:function(e,t){T.a.put("".concat(L,"/api/tags/").concat(e),t).then((function(e){console.log(e.data)}))}}]),e}(),R=new Intl.DateTimeFormat("fr",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}),E=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,[{key:"date",value:function(e){return R.format(new Date(e))}},{key:"string",value:function(e){return e||""}}]),e}(),U=(n(55),n(80)),M=n.n(U),F=n(129),P=n(130),B=(n(187),function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={value:a.props.content,selectedTab:"write"},a.handleContentChange=a.handleContentChange.bind(Object(k.a)(a)),a.handleTab=a.handleTab.bind(Object(k.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleContentChange",value:function(e){this.setState({value:e}),this.props.onChangeContent(e)}},{key:"handleTab",value:function(e){this.setState({selectedTab:e})}},{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"container",style:{width:"99%",padding:"10px"},children:Object(b.jsx)(M.a,{value:this.state.value,onChange:this.handleContentChange,selectedTab:this.state.selectedTab,onTabChange:this.handleTab,generateMarkdownPreview:function(e){return Promise.resolve(Object(b.jsx)(F.a,{children:e,remarkPlugins:[P.a]}))},childProps:{writeButton:{tabIndex:-1}},minEditorHeight:200,minPreviewHeight:200})})})}}]),n}(c.a.Component));n(190);var z=function(e){var t=e.minutes,n=e.seconds;return Object(b.jsxs)("div",{className:"audiotime",children:[void 0!==t?"".concat(t<=9?"0"+t:t):"00",":",void 0!==n?"".concat(n<=9?"0"+n:n):"00"]})},H=(n(191),n(259)),G=n(260),q=n(261),V=n(262);var W=function(e){var t,n,c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)(0),l=Object(o.a)(u,2),d=l[0],h=l[1],p=Object(a.useState)(0),j=Object(o.a)(p,2),f=j[0],m=j[1],O=Object(a.useRef)(),v=Object(a.useRef)(),g=Object(a.useRef)();Object(a.useEffect)((function(){var t=e.duration;h(t),v.current.max=t}),[null===O||void 0===O||null===(t=O.current)||void 0===t?void 0:t.loadedmetadata,null===O||void 0===O||null===(n=O.current)||void 0===n?void 0:n.readyState]);var x=function(e){var t=Math.floor(e/60),n=t<10?"0".concat(t):"".concat(t),a=Math.floor(e%60),c=a<10?"0".concat(a):"".concat(a);return"".concat(n,":").concat(c)},y=function e(){null!==O.current&&(v.current.value=O.current.currentTime,S(),g.current=requestAnimationFrame(e),O.current.currentTime>d&&i(!1))},k=function(){O.current.currentTime=v.current.value,S()},S=function(){m(v.current.value)};return Object(b.jsxs)("div",{className:"container_player",children:[Object(b.jsxs)("audio",{ref:O,preload:"metadata",children:[Object(b.jsx)("source",{src:e.audios[0]?e.audios[0]:e.url,type:"audio/ogg"}),Object(b.jsx)("source",{src:e.audios[0]?e.audios[0]:e.url,type:"audio/mpeg"})]}),Object(b.jsx)("div",{children:"TITLE"}),Object(b.jsxs)("div",{className:"container_duration_current_progress",children:[Object(b.jsx)("div",{children:x(f)}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"range",defaultValue:"0",ref:v,onChange:k})}),console.log("duration",d),Object(b.jsx)("div",{children:isNaN(d)?"__:__":x(d)})]}),Object(b.jsxs)("div",{className:"container_duration_current_progress",children:[Object(b.jsx)("button",{onClick:function(){v.current.value=Number(v.current.value-30),k()},children:Object(b.jsx)(H.a,{})}),Object(b.jsxs)("button",{onClick:function(){var e=s;i(!e),e?(O.current.pause(),cancelAnimationFrame(g.current)):(O.current.play(),g.current=requestAnimationFrame(y))},children:[" ",s?Object(b.jsx)(G.a,{}):Object(b.jsx)(q.a,{})]}),Object(b.jsx)("button",{onClick:function(){v.current.value=Number(v.current.value+30),k()},children:Object(b.jsx)(V.a,{})})]})]})};var J=function(e){var t=Object(a.useState)({h:0,m:0,s:0}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),u=i[0],l=i[1],d=Object(a.useState)(!1),h=Object(o.a)(d,2),p=h[0],j=h[1],f=Object(a.useState)(!1),m=Object(o.a)(f,2),O=(m[0],m[1]),v=Object(a.useState)([]),y=Object(o.a)(v,2),k=y[0],S=y[1],N=Object(a.useState)(null),C=Object(o.a)(N,2),A=(C[0],C[1]),D=Object(a.useState)(!1),w=Object(o.a)(D,2),_=(w[0],w[1]),T=Object(a.useRef)(null),L=Object(a.useRef)(null),I=Object(a.useRef)(null),R="audio/*";function E(){T.current=setInterval(U,1e3)}function U(){l((function(e){return e+1}))}function M(t){clearInterval(T.current),r({h:0,m:0,s:0}),t.preventDefault(),L.current.stop(),j(!1),_(!1),function(){var t=new Blob(I.current,{type:R}),n=window.URL.createObjectURL(t);S([n]),A(t),e.handleAudioStop({url:n,blob:t,chunks:I.current,duration:c})}()}return Object(a.useEffect)((function(){r((function(e){return function(e){var t=Math.floor(e/3600),n=e%3600,a=Math.floor(n/60),c=n%60,r=Math.ceil(c);return{h:t,m:a,s:r}}(u)}))}),[u]),Object(a.useEffect)((function(){!function(){var t=Object(x.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("anyNameFunction"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!navigator.mediaDevices){t.next=11;break}return t.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:n=t.sent,e.mimeTypeToUseWhenRecording?L.current=new MediaRecorder(n,{mimeType:e.mimeTypeToUseWhenRecording}):L.current=new MediaRecorder(n),I.current=[],L.current.ondataavailable=function(e){e.data&&e.data.size>0&&I.current.push(e.data)},t.next=13;break;case 11:O(!0),console.log("Media Decives will work only with SSL.....");case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(b.jsx)(b.Fragment,{children:null!==e.audioURL?Object(b.jsx)(W,{url:e.audioURL,duration:e.duration?e.duration:u,audios:k}):Object(b.jsxs)("div",{className:"_audiorecorder",children:[Object(b.jsx)("div",{className:"audiotitle",children:e.title}),p?Object(b.jsx)("span",{className:"audiotitle clignote",children:"Recording..."}):null,Object(b.jsx)(z,{minutes:c.m,seconds:c.s}),p?Object(b.jsx)("button",{onClick:M,children:"stop"}):Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),I.current=[],L.current.start(10),E(),j(!0)},children:"record"}),Object(b.jsx)("button",{onClick:function(t){p&&M(t),r((function(e){return{h:0,m:0,s:0}})),l(0),j(!1),O(!1),S([]),A(null),e.handleReset()},children:"reset"})]})})};var K=function(e){var t=Object(a.useState)({url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}}),n=Object(o.a)(t,2),c=n[0],r=n[1];return Object(b.jsx)(J,{title:"New recording",audioURL:e.url?e.url:c.url,handleAudioStop:function(t){return function(t){console.log(t),r(t),e.onAudioData(t)}(t)},handleAudioUpload:function(e){return t=e,void console.log(t);var t},handleReset:function(){return function(){console.log("handleReset");var t={url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}};r(t),e.onAudioData(t)}()},mimeTypeToUseWhenRecording:"audio/webm",duration:e.duration,isAudioRecorded:e.isAudioRecorded})},Q=(c.a.Component,n(85)),X=function(e){Object(j.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).store=new I,n.format=new E,n.logInit={id:null,heart:!1,title:"",description:"",createdAt:"",updatedAt:"",namespace:null,tag:"",type:"",content:"",namespacesAvaible:[],tags:[],tagsAvaible:[]},n.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},n.state=Object(i.a)(Object(i.a)({},n.logInit),n.appStateInit),n.handleChange=n.handleChange.bind(Object(k.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(k.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(k.a)(n)),n.handleAudioData=n.handleAudioData.bind(Object(k.a)(n)),n.handleNameSpaceSelect=n.handleNameSpaceSelect.bind(Object(k.a)(n)),n.handleNameSpaceCreate=n.handleNameSpaceCreate.bind(Object(k.a)(n)),n.handleTagSelect=n.handleTagSelect.bind(Object(k.a)(n)),n.handleTagCreate=n.handleTagCreate.bind(Object(k.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(y.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(x.a)(g.a.mark((function e(t){var n,a,c,r,s,i,o,u,l,d=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.title){e.next=4;break}return this.props.notify_error("Title is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=14;break}return n=this.state,a=n.id,c=n.title,r=n.description,s=n.heart,i=n.namespace,o=n.tags,u=n.content,e.next=8,this.store.updateLog(a,{title:c,description:r,heart:s,namespace:i,tags:o,content:u});case 8:e.sent,"audio"==this.state.type&&this.saveAudio(a,this.state.createdAt),this.props.notify_success("log updated"),console.log(this.props),e.next=17;break;case 14:l=function(e){"audio"==d.state.type&&d.saveAudio(e.id,e.createdAt).then((function(){return console.log("saveAudio")}))},this.store.addLog({title:this.state.title,description:this.state.description,heart:this.state.heart,namespace:this.state.namespace,tags:this.state.tags,type:this.props.type,content:this.state.content},(function(e){console.log("res",e);var t=e.data;d.load(t.id),l(t)})),this.props.notify_success("log added");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAudio",value:function(){var e=Object(x.a)(g.a.mark((function e(t,a){var c,r,s,i,o,u,l,d,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.state.audioData){e.next=3;break}return e.abrupt("return");case 3:console.log("data",c),r=c.duration,s=function(e){return 3600*e.h+60*e.m+e.s},i=c.blob,o=n(198),u=n(226),l=o.connect(this.store.getSocketAudioUrl()),d=u.createStream(),b=n(248),u(l).emit("audiostream",d,{createdAt:a,id:t,duration:s(r)}),b(i).pipe(d);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleHeart",value:function(e){e.preventDefault(),this.setState({heart:!this.state.heart})}},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteLog(this.state.id),this.props.notify_success("log deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault();var t,n={title:(t=this.logInit).title,description:t.description,heart:t.heart,namespace:t.namespace,tag:t.tag,content:t.content};this.setState(n)}},{key:"load",value:function(e){var t=this;this.store.getLog(e).then((function(n){console.log("data",n);var a=n.id,c=n.title,r=n.description,s=n.createdAt,o=n.heart,u=n.updatedAt,l=n.namespace,d=n.tags,b=n.type,h=n.content,p=l?Object(i.a)(Object(i.a)({},{value:l.name,label:l.name}),l):[],j=t.addValueAndLabelToSelect(d);if(console.log(p),"audio"===b&&""!==h){console.log("content",h);var f=JSON.parse(h);console.log("contentAudio",f),t.setState({content:f})}else t.setState({content:h});t.setState({id:a,title:c,description:r,createdAt:s,heart:o,updatedAt:u,namespace:p,tags:j,type:b,mode:"EDIT"}),t.store.getNextPrevLog(e).then((function(e){t.setState(e)}))})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/log/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){var e=this.props.type;this.setState({mode:"ADD",type:e})}},{key:"componentDidMount",value:function(){var e=Object(x.a)(g.a.mark((function e(){var t,n,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:return e.next=12,this.store.getNamespaces();case 12:return a=e.sent,console.log("dataNamespace",a),this.setState({namespacesAvaible:this.addValueAndLabelToSelect(a)}),e.next=17,this.store.getTags();case 17:c=e.sent,this.setState({tagsAvaible:this.addValueAndLabelToSelect(c)});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addValueAndLabelToSelect",value:function(e){return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{value:e.name,label:e.name})}))}},{key:"handleNameSpaceSelect",value:function(e){console.log("selected",e),this.setState({namespace:e})}},{key:"handleNameSpaceCreate",value:function(e){var t=this;this.store.addNamespace({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(O.a)(t.state.namespacesAvaible),[a])),t.setState({namespacesAvaible:[].concat(Object(O.a)(t.state.namespacesAvaible),[a]),namespace:a})}))}},{key:"handleTagSelect",value:function(e){this.setState({tags:e})}},{key:"handleTagCreate",value:function(e){var t=this;this.store.addTag({name:e},(function(e){var n=e.data,a=Object(i.a)(Object(i.a)({},n),{value:n.name,label:n.name});console.log("handleNameSpaceCreate",[].concat(Object(O.a)(t.state.tagsAvaible),[a])),t.setState({tagsAvaible:[].concat(Object(O.a)(t.state.tagsAvaible),[a]),tag:a})}))}},{key:"onPrevLog",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextLog",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextLog")}},{key:"handleAudioData",value:function(e){Object(i.a)({},e);console.log("data",e),this.setState({audioData:e}),console.log("handleAudioData")}},{key:"computeUrlAudio",value:function(){var e=this.state.id;return"audio"===this.state.type&&this.state.content.isRecorded?this.store.getAudioStreamingUrl(e):null}},{key:"renderSwitch",value:function(e){switch(e){case"text":return Object(b.jsx)(B,{content:this.state.content,onChangeContent:this.handleContentChange});case"audio":return Object(b.jsx)(K,{id:this.state.id,isAudioRecorded:this.state.content.isRecorded,duration:this.state.content.duration,url:this.computeUrlAudio(),onAudioData:this.handleAudioData});default:return"foo"}}},{key:"handleContentChange",value:function(e){this.setState({content:e})}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.heart,a=t.isRedirect,c=t.createdAt,r=t.updatedAt,s=t.mode,o=t.title,u=t.description,d=t.content,h=t.namespace,p=t.tag,j=t.type,f=t.namespacesAvaible;r=(c=c?this.format.date(c):"")?this.format.date(r):"",o=this.format.string(o),u=this.format.string(u),p=this.format.string(p),d=this.format.string(d);var m={control:function(e){return Object(i.a)(Object(i.a)({},e),{},{backgroundColor:"white"})},option:function(e,t){t.data,t.isDisabled,t.isFocused,t.isSelected;return Object(i.a)(Object(i.a)({},e),{},{color:"#000",cursor:"default"})}};return a?Object(b.jsx)(l.a,{to:"/"}):Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"header_group",children:[Object(b.jsx)("h1",{className:"capital",children:j}),Object(b.jsx)("h3",{children:s})]}),Object(b.jsxs)("div",{className:"title_description_group",children:[Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Title*"}),o?"":Object(b.jsx)("h5",{children:"This field is required"}),Object(b.jsx)("input",{id:"title",name:"title",className:"title_input",placeholder:"Title",type:"text",onChange:function(t){return e.handleChange(t)},value:o})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:u})]})]}),Object(b.jsxs)("div",{className:"metadata_group",children:[Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Created At"}),Object(b.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Updated At"}),Object(b.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:r})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Heart"}),Object(b.jsx)("button",{onClick:function(t){return e.toggleHeart(t)},children:Object(b.jsx)(w,{fill:n?"true":"false",color:"red"})})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Namespace"}),Object(b.jsx)(Q.a,{value:h,onChange:this.handleNameSpaceSelect,onCreateOption:this.handleNameSpaceCreate,options:f,isClearable:!0,styles:m})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Tag"}),Object(b.jsx)(Q.a,{value:this.state.tags,onChange:this.handleTagSelect,onCreateOption:this.handleTagCreate,options:this.state.tagsAvaible,isClearable:!0,isMulti:!0,styles:m})]})]}),Object(b.jsxs)("div",{className:"content_group",children:[this.state.prev?Object(b.jsx)("button",{className:"before_button",onClick:function(t){return e.onPrevLog(t)},children:Object(b.jsx)(S.a,{})}):"",this.renderSwitch(this.state.type),this.state.next?Object(b.jsx)("button",{className:"after_button",onClick:function(t){return e.onNextLog(t)},children:Object(b.jsx)(N.a,{})}):""]}),Object(b.jsxs)("div",{className:"button_group",children:[Object(b.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(b.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(b.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(b.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),a}(c.a.Component),Y=function(e){var t=e.text,n=e.callback;return Object(b.jsx)("button",{onClick:n,children:t})},Z=function(e){var t=e.entity;return console.log("NO LinkedLogsButton",t),Object(b.jsx)(b.Fragment,{children:t.logs&&t.logs.length>0?function(e){return console.log("NO computeLink logs=",e.logs),Object(b.jsx)(u.b,{className:"button",to:{pathname:"/linkedlogs",state:{logs:e.logs}},children:"Logs"})}(t):""})},$=function(e){var t=e.tableData,n=e.columns,a=e.actions;return console.log("tableData",t),Object(b.jsx)("tbody",{children:t.map((function(e){return console.log("tableData",t),Object(b.jsx)("tr",{children:n.map((function(t){var n=t.accessor,c=t.func;return function(e,t,n){console.log("NO generateTD data",e);var c=e[n]?e[n]:"\u2014\u2014";return"action"==n?Object(b.jsx)("td",{children:a.map((function(t){var n=t.text,a=t.callback,c=t.type,r=t.id;return"nolinked"==c?Object(b.jsx)(Y,{text:n,callback:function(){return a(e.id)}},r):"linked"==c?Object(b.jsx)(Z,{entity:e},r):""}))},n):t?Object(b.jsx)("td",{children:t(e)},n):Object(b.jsx)("td",{children:c},n)}(e,c,n)}))},e.id)}))})},ee=function(e){var t=e.columns,n=e.handleSorting,c=Object(a.useState)(""),r=Object(o.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)("asc"),l=Object(o.a)(u,2),d=l[0],h=l[1];return Object(b.jsx)("thead",{children:Object(b.jsx)("tr",{children:t.map((function(e){var t=e.label,a=e.accessor,c=e.sortable,r=c?s===a&&"asc"===d?"up":s===a&&"desc"===d?"down":"default":"";return Object(b.jsx)("th",{onClick:c?function(){return function(e){var t=e===s&&"asc"===d?"desc":"asc";i(e),h(t),n(e,t)}(a)}:null,className:r,children:t},a)}))})})};function te(e,t){return Object(O.a)(e).sort((function(e,n){var a=t.filter((function(e){return e.sortbyOrder})),c=Object.assign.apply(Object,[{}].concat(Object(O.a)(a))),r=c.accessor,s=void 0===r?"id":r,i=c.sortbyOrder,o=void 0===i?"asc":i;if(null===e[s])return 1;if(null===n[s])return-1;if(null===e[s]&&null===n[s])return 0;var u=e[s].toString().localeCompare(n[s].toString(),"en",{numeric:!0});return"asc"===o?u:-u}))}n(250);var ne=function(e){var t=e.caption,n=e.data,c=e.columns,r=e.actions,s=function(e,t){var n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)(Object(x.a)(g.a.mark((function n(){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:a=n.sent,s(te(a,t));case 4:case"end":return n.stop()}}),n)}))),[e]),[r,function(e,t){e&&s((function(n){return Object(O.a)(n).sort((function(n,a){return null===n[e]?1:null===a[e]?-1:null===n[e]&&null===a[e]?0:n[e].toString().localeCompare(a[e].toString(),"en",{numeric:!0})*("asc"===t?1:-1)}))}))}]}(n,c),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("caption",{children:t}),Object(b.jsx)(ee,{columns:c,handleSorting:l}),Object(b.jsx)($,{columns:c,tableData:u,actions:r})]})})};var ae=function(e){var t=e.entities,n=e.fooCb,c=e.filterByField,r=Object(a.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(a.useState)([]),d=Object(o.a)(l,2),h=d[0],p=d[1];return Object(a.useEffect)((function(){console.log("name",i),console.log("entities",t),n(""===i?t:h),console.log("foundentities",h)}),[i]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{type:"search",value:i,onChange:function(e){var n=e.target.value;if(""!==n){var a=t.filter((function(e){return e[c].toLowerCase().startsWith(n.toLowerCase())}));p(a)}else p(t);u(n)},className:"input",placeholder:"Filter by "+c.toUpperCase()}),Object(b.jsx)("button",{onClick:function(){return u("")},children:"Reset"})]})},ce=function(e){var t=e.columns,n=e.entities,c=e.caption,r=e.actions,s=e.title,i=e.ADD_BUTTONS,l=e.filterByField,d=Object(a.useState)([]),h=Object(o.a)(d,2),p=h[0],j=h[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{children:s}),i.map((function(e){var t=e.text,n=e.link;e.id;return Object(b.jsx)(u.b,{to:n,className:"button",children:t})})),Object(b.jsx)("br",{}),Object(b.jsx)(ae,{filterByField:l,entities:n,fooCb:function(e){return j(e)}}),Object(b.jsx)(ne,{caption:c,data:p&&p.length>0?p:n,columns:t,actions:r})]})},re=function(e){var t=new I,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(b.jsx)(u.b,{to:"/namespace/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:424542,type:"nolinked",text:"Delete",callback:function(e){return h(e)}},{id:182727782,type:"linked"}],r=Object(a.useState)([]),s=Object(o.a)(r,2),l=s[0],d=s[1],h=function(e){console.log("deleting",e),t.deleteNamespace(e,(function(){var t=l.filter((function(t){return t.id!=e}));d(t)}))};return Object(a.useEffect)(Object(x.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNamespaces();case 2:return n=e.sent,console.log("namespacesData",n),d(n),e.abrupt("return",(function(){console.log("cleanup")}));case 6:case"end":return e.stop()}}),e)}))),[]),console.log("namespaces",l),Object(b.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/namespaces",entities:l,columns:n,actions:c,title:"NAMESPACES",ADD_BUTTONS:[{id:77932970289,text:"Add Namespace",link:"/newnamespace"}],filterByField:"name"}))},se=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).store=new I,a.format=new E,a.namespaceInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.namespaceInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(k.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a}return Object(p.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(y.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(x.a)(g.a.mark((function e(t){var n,a,c,r,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,r=n.description,e.next=8,this.store.updateNamespace(a,{name:c,description:r});case 8:e.sent,this.props.notify_success("namespace updated"),console.log(this.props),e.next=16;break;case 13:this.store.addNamespace({name:this.state.name,description:this.state.description},(function(e){console.log("res",e);var t=e.data;s.load(t.id)})),this.setState({mode:"EDIT"}),this.props.notify_success("namespace added");case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteNamespace(this.state.id),this.props.notify_success("namespace deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getNamespace(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,r=e.createdAt,s=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:r,updatedAt:s,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/namespace/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevNamespace",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextNamespace",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextNamespace")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,r=t.mode,s=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",s=this.format.string(s),i=this.format.string(i),n?Object(b.jsx)(l.a,{to:"/"}):Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"header_group",children:[Object(b.jsx)("h3",{children:"NAMESPACE"}),Object(b.jsx)("h2",{children:r})]}),Object(b.jsxs)("div",{className:"title_description_group",children:[Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Name*"}),s?"":Object(b.jsx)("h5",{children:"This field is required"}),Object(b.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:s})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(b.jsxs)("div",{className:"metadata_group",children:[Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Created At"}),Object(b.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Updated At"}),Object(b.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(b.jsxs)("div",{className:"button_group",children:[Object(b.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(b.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(b.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(b.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),ie=function(e){var t=new I,n=[{label:"ID",accessor:"id",sortable:!0},{label:"Name",accessor:"name",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(b.jsx)(u.b,{to:"/tag/".concat(e.id),children:e.name})}},{label:"Description",accessor:"Description",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],c=[{id:736768173678168,type:"nolinked",text:"Delete",callback:function(e){return h(e)}},{id:9390019109,type:"linked"}],r=Object(a.useState)([]),s=Object(o.a)(r,2),l=s[0],d=s[1],h=function(e){console.log("deleting",e),t.deleteTag(e,(function(){var t=l.filter((function(t){return t.id!=e}));d(t)}))};return Object(a.useEffect)(Object(x.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTags();case 2:return n=e.sent,d(n),e.abrupt("return",(function(){console.log("cleanup"),d([])}));case 5:case"end":return e.stop()}}),e)}))),[]),console.log("tags",l),Object(b.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/tags",entities:l,columns:n,actions:c,title:"TAGS",ADD_BUTTONS:[{id:54574756767673,text:"Add Tag",link:"/newtag"}],filterByField:"name"}))},oe=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).store=new I,a.format=new E,a.tagInit={id:null,name:"",description:"",createdAt:"",updatedAt:""},a.appStateInit={mode:"",isRedirect:!1,prev:null,next:null,toUrl:null},a.state=Object(i.a)(Object(i.a)({},a.tagInit),a.appStateInit),a.handleChange=a.handleChange.bind(Object(k.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a}return Object(p.a)(n,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name;e.target.value;this.setState(Object(y.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(x.a)(g.a.mark((function e(t){var n,a,c,r,s=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return this.props.notify_error("name is empty"),e.abrupt("return");case 4:if("EDIT"!==this.state.mode){e.next=13;break}return n=this.state,a=n.id,c=n.name,r=n.description,e.next=8,this.store.updateTag(a,{name:c,description:r});case 8:e.sent,this.props.notify_success("tag updated"),console.log(this.props),e.next=15;break;case 13:this.store.addTag({name:this.state.name,description:this.state.description},(function(e){var t=e.data;s.load(t.id)})),this.props.notify_success("tag added");case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(e){e.preventDefault(),this.store.deleteTag(this.state.id),this.props.notify_success("tag deleted"),this.setState({isRedirect:!0})}},{key:"onCancel",value:function(e){e.preventDefault(),this.setState({isRedirect:!0})}},{key:"onReset",value:function(e){e.preventDefault(),this.setState({name:"",description:""})}},{key:"load",value:function(e){var t=this;this.store.getTag(e).then((function(e){console.log("data",e);var n=e.id,a=e.name,c=e.description,r=e.createdAt,s=e.updatedAt;t.setState({id:n,name:a,description:c,createdAt:r,updatedAt:s,mode:"EDIT"})})).catch((function(e){console.log(e)}))}},{key:"getObjId",value:function(){return Object(l.e)(this.props.location.pathname,{path:"/tag/:id",exact:!0,strict:!0})}},{key:"whichMode",value:function(e){return null==e?{mode:"ADD"}:{mode:"EDIT",id:e.params.id}}},{key:"modeEdit",value:function(e){this.load(e),this.setState({mode:"EDIT"})}},{key:"modeAdd",value:function(){this.setState({mode:"ADD"})}},{key:"componentDidMount",value:function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("componentDidMount"),t=this.getObjId(),n=this.whichMode(t),e.t0=n.mode,e.next="ADD"===e.t0?6:"EDIT"===e.t0?8:10;break;case 6:return this.modeAdd(),e.abrupt("break",10);case 8:return this.modeEdit(n.id),e.abrupt("break",10);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onPrevTag",value:function(e){e.preventDefault(),this.load(this.state.prev)}},{key:"onNextTag",value:function(e){e.preventDefault(),this.load(this.state.next),console.log("onNextTag")}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.isRedirect,a=t.createdAt,c=t.updatedAt,r=t.mode,s=t.name,i=t.description;return c=(a=a?this.format.date(a):"")?this.format.date(c):"",s=this.format.string(s),i=this.format.string(i),n?Object(b.jsx)(l.a,{to:"/"}):Object(b.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(b.jsxs)("div",{className:"header_group",children:[Object(b.jsx)("h3",{children:"TAG"}),Object(b.jsx)("h2",{children:r})]}),Object(b.jsxs)("div",{className:"title_description_group",children:[Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("label",{children:this.state.id?"ID ".concat(this.state.id):""})}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Name*"}),s?"":Object(b.jsx)("h5",{children:"This field is required"}),Object(b.jsx)("input",{id:"name",name:"name",className:"title_input",placeholder:"Name",type:"text",onChange:function(t){return e.handleChange(t)},value:s})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("input",{id:"description",name:"description",className:"description_input",placeholder:"Description",type:"text",onChange:function(t){return e.handleChange(t)},value:i})]})]}),Object(b.jsxs)("div",{className:"metadata_group",children:[Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Created At"}),Object(b.jsx)("input",{id:"createdAt",name:"createdAt",readOnly:!0,className:"date_input",placeholder:"Created At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:a})]}),Object(b.jsxs)("div",{className:"item",children:[Object(b.jsx)("label",{children:"Updated At"}),Object(b.jsx)("input",{id:"updatedAt",name:"updatedAt",readOnly:!0,className:"date_input",placeholder:"Updated At",type:"text",maxLength:"16",size:"16",onChange:function(t){return e.handleChange(t)},value:c})]})]}),Object(b.jsxs)("div",{className:"button_group",children:[Object(b.jsx)("button",{onClick:function(t){return e.handleSubmit(t)},className:"tertiary button_edit_text",children:"Save"}),Object(b.jsx)("button",{className:"secondary button_edit_text",onClick:function(t){return e.onCancel(t)},children:"Cancel"}),Object(b.jsx)("button",{className:"primary button_edit_text",onClick:function(t){return e.onReset(t)},children:"Reset"}),Object(b.jsx)("button",{className:"inverse button_edit_text",onClick:function(t){return e.onDelete(t)},children:"Delete"})]})]})}}]),n}(c.a.Component),ue=function(e){var t=new I,n=new E,c=[{label:"ID",accessor:"id",sortable:!0},{label:"Title",accessor:"title",sortable:!0,sortbyOrder:"desc",func:function(e){return Object(b.jsx)(u.b,{to:"/log/".concat(e.id),children:e.title})}},{label:"Description",accessor:"Description",sortable:!0},{label:"CreatedAt",accessor:"createdAt",sortable:!0,func:function(e){return n.date(e.createdAt)}},{label:"Heart",accessor:"heart",sortable:!0,func:function(e){return e.heart?Object(b.jsx)(w,{}):""}},{label:"Namespace",accessor:"namespace",sortable:!0,func:function(e){return Object(b.jsx)(u.b,{to:"/namespace/".concat(e.id),children:e.namespace})}},{label:"Type",accessor:"type",sortable:!0},{label:"Action",accessor:"action",sortable:!1}],r=[{id:0xfb95796e0fb,type:"nolinked",text:"Delete",callback:function(e){return j(e)}}],s=Object(a.useState)([]),l=Object(o.a)(s,2),d=l[0],h=l[1],p=function(e){return e.map((function(e){var t;console.log("NO log.namespace",e);var n=(null===(t=e.namespace)||void 0===t?void 0:t.name)?e.namespace.name:e.namespace?e.namespace:"";return Object(i.a)(Object(i.a)({},e),{},{namespace:n})}))},j=function(e){console.log("deleting",e),t.deleteLog(e,(function(){var t=d.filter((function(t){return t.id!=e}));h(t)}))};return Object(a.useEffect)(Object(x.a)(g.a.mark((function n(){var a,c,r,s,i,o,u;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getLogs();case 2:return i=n.sent,o=(null===e||void 0===e||null===(a=e.location)||void 0===a||null===(c=a.state)||void 0===c?void 0:c.logs)?e.location.state.logs:i,console.log("props?.location?.state?.logs ?",null===e||void 0===e||null===(r=e.location)||void 0===r||null===(s=r.state)||void 0===s?void 0:s.logs),u=p(o),console.log("processed_data",u),h(u),n.abrupt("return",(function(){console.log("cleanup")}));case 9:case"end":return n.stop()}}),n)}))),[]),Object(b.jsx)(ce,Object(i.a)(Object(i.a)({},e),{},{caption:"/",entities:d,columns:c,actions:r,title:"LOGS",ADD_BUTTONS:[{id:74373873,text:"Add Text Log",link:"/newtextlog"},{id:53657667763,text:"Add Audio Log",link:"/newaudiolog"}],filterByField:"title"}))},le=function(){var e=Object(a.useState)((function(){return null})),t=Object(o.a)(e,2),n=t[0],c=(t[1],function(e){return n?"En ligne":"?Hors-ligne"});return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(c,{}),Object(b.jsx)(d.a,{}),Object(b.jsxs)(u.a,{children:[Object(b.jsx)(m,{}),Object(b.jsx)(l.b,{path:"/",exact:!0,render:function(e){return Object(b.jsx)(ue,Object(i.a)({},e))}}),Object(b.jsx)(l.b,{path:"/dearlog-webapp",exact:!0,render:function(e){return Object(b.jsx)(ue,Object(i.a)({},e))}}),Object(b.jsx)(l.b,{async:!0,path:"/linkedlogs",exact:!0,render:function(e){return Object(b.jsx)(ue,Object(i.a)({},e))}}),Object(b.jsx)(l.b,{path:"/log/:id",exact:!0,render:function(e){return Object(b.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/namespace",exact:!0,render:function(e){return Object(b.jsx)(re,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/namespace/:id",exact:!0,render:function(e){return Object(b.jsx)(se,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/newnamespace",exact:!0,render:function(e){return Object(b.jsx)(se,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/tag",exact:!0,render:function(e){return Object(b.jsx)(ie,Object(i.a)({},e))}}),Object(b.jsx)(l.b,{path:"/tag/:id",exact:!0,render:function(e){return Object(b.jsx)(oe,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/newtag",exact:!0,render:function(e){return Object(b.jsx)(oe,Object(i.a)(Object(i.a)({},e),{},{notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/newtextlog",exact:!0,render:function(e){return Object(b.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{type:"text",notify_error:d.b.error,notify_success:d.b.success}))}}),Object(b.jsx)(l.b,{path:"/newaudiolog",exact:!0,render:function(e){return Object(b.jsx)(X,Object(i.a)(Object(i.a)({},e),{},{type:"audio",notify_error:d.b.error,notify_success:d.b.success}))}})]})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,265)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(le,{})}),document.getElementById("root")),de()},68:function(e,t,n){}},[[251,1,2]]]);
//# sourceMappingURL=main.65fdb70f.chunk.js.map